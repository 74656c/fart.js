/**
 * 
 * fart.js
 * A javascript library for adding fart sounds to your web experience
 * 
 * 
 * @author 	Tel Smith
 * @tweet 	@74656c
 * @web 	http://jsfart.com/
 * @github 	https://github.com/74656c/fart.js/
 * 
 * version 2.0.0
 * 
 * Removed need for jQuery for actual plugin
 * 
 * 
 */

function Fart(e){this.sound=this.default_sound;this.fart_player=null;this.old_player=false;this.options=this.fartxtend({default_sound:farts.raspberry,loop:false,volume:50},e);this.init()}var farts={toot:"fart1",ripper:"fart2",plop:"fart3",squit:"fart4",raspberry:"fart5",squat:"fart6",tuppence:"fart7",liftoff:"fart8",trumpet:"fart9",fizzler:"fart10",windy:"fart11",eine:"fart12",fartception:"fart13",fartpoint1:"fart14"};Fart.preloaded=false;Fart.prototype.fartxtend=function(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e};Fart.prototype.init=function(){this.fart_player=document.createElement("audio");if(typeof this.fart_player.canPlayType=="undefined"){this.load_old_player()}this.preload()};Fart.prototype.load_old_player=function(){document.body.innerHTML+='<div style="display:none;"><object id="contentPlayer" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="100" height="100"><param name="volume" value="100%" /><param name="windowlessVideo" value="true"><param name="AnimationatStart" value="0" /><param name="autostart" value="1" /></object></div>';this.fart_player=document.getElementById("contentPlayer");this.fart_old_player=true};Fart.prototype.play=function(e,t){var n=e?farts[e]?farts[e]:e:this.options.default_sound;t=t||null;if(!this.fart_old_player){var r=this.fart_player.canPlayType("audio/mp3")?".mp3":".wav";this.fart_player.setAttribute("src","/farts/"+n+r);this.fart_player.loop=this.options.loop;this.fart_player.volume=this.options.volume/100;this.fart_player.play();$(this.fart_player).on("ended",function(){if(t){t();$(this.fart_player).off("ended")}})}else{this.fart_player.URL="/farts/"+n+".mp3"}};Fart.prototype.stop=function(){this.fart_player.pause()};Fart.prototype.remove=function(){this.fart_player.remove()};Fart.prototype.random=function(){var e=Object.keys(farts);var t=e[e.length*Math.random()<<0];this.play(t)};Fart.prototype.preload=function(){var e=this.fart_player;if(!this.fart_old_player&&!Fart.preloaded){for(f in farts){var t=e.canPlayType("audio/mp3")?".mp3":".wav";e.setAttribute("src","/farts/"+farts[f]+t);console.log("preload:",farts[f])}Fart.preloaded=true}}